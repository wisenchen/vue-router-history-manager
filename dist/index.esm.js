import{ref as t}from"vue";var r=function(){function r(r,i){void 0===i&&(i=100);var e=this;this.currentIdx=t(-1),this.historyStack=t([]),this.router=r,this.maxStackLength=i,this.router.afterEach((function(){e.updateHistory()}))}return r.prototype.updateHistory=function(){var t,r=null===(t=window.history.state)||void 0===t?void 0:t.key;if(r){var i=this.historyStack.value.findIndex((function(t){return t.key===r}));-1===i?(this.historyStack.value.splice(this.currentIdx.value+1),this.historyStack.value.push({key:r,url:window.location.href}),this.currentIdx.value=this.historyStack.value.length-1,this.historyStack.value.length>this.maxStackLength&&this.historyStack.value.shift()):this.currentIdx.value=i}},r.prototype.canBack=function(){return this.historyStack.value.length>1&&this.currentIdx.value>0},r.prototype.canForward=function(){return this.currentIdx.value<this.historyStack.value.length-1},r.prototype.back=function(){this.canBack()&&(this.currentIdx.value--,this.jumpCurrentPosition())},r.prototype.forward=function(){this.canForward()&&(this.currentIdx.value++,this.jumpCurrentPosition())},r.prototype.jumpCurrentPosition=function(){var t=this.historyStack.value[this.currentIdx.value];t&&(window.location.href=t.url)},r}(),i={install:function(t,i){var e=i.router;if(!e)throw new Error("Router is required");var o=new r(e,i.maxStackLength);t.prototype.$historyManager=o}};export{i as default};
